# TODO
# 1. Sorting panes:
#   - swap one windows 1-time next / at the end
#   - take the pane in other sessions
#   - combine panes.
#
# 2. Notifications (tmux vs. mako?)
# 3. saving sessions
#    - push it to Drominito/env
source-file ~/.vim/tmux-vim-balken

set -g status-style bg=default 
set -g status-style fg=default
#printf "\033[?1003h"  
set -g mouse

set-option -g terminal-overrides 'xterm*:Tc'
set -s escape-time 0

#set -g pane-border-status top
set -g pane-border-format "#D: #T: #(echo '#{pane_current_path}' | sed 's#$HOME#~#; s#\\([^/]*/[^/]*/\\).*\\(/[^/]*/.*\\)$#\\1 ... \\2#; s#/# > #g')"

# For passthrough
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM
set -gq allow-passthrough all

set -as terminal-overrides ',xterm-kitty:RGB'
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # Unterstützung für untercurls
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

set -g default-terminal "xterm-256color"

# only when on neo layout
#bind-key -n C-w send-keys C-z

#set -g status-interval 60
#WEATHER='#(curl -s wttr.in/London:Stockholm:Moscow\?format\="%%l:+%%c%%20%%t%%60%%w&period=60")'
#set -g status-right "$WEATHER ..."


# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'github_username/plugin_name#branch'
# set -g @plugin 'git@github.com:user/plugin'
# set -g @plugin 'git@bitbucket.com:user/plugin'

## Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
#run '~/.tmux/plugins/tpm/tpm'

## List of plugins
#set -g @plugin 'tmux-plugins/tpm'
#set -g @plugin 'tmux-plugins/tmux-sensible'

#set -g @plugin 'christoomey/vim-tmux-navigator'

# Home/End korrekt interpretieren
set -g xterm-keys on
bind-key -n Home send-keys C-a
bind-key -n End send-keys C-e

set -gq allow-passthrough all
set -g extended-keys always


set -g default-terminal "xterm-kitty"
set -as terminal-overrides ',xterm-kitty:RGB'
set -as terminal-overrides ',xterm-kitty:smkx@'
set -as terminal-overrides ',xterm-kitty:rmkx@'


# -- --


# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'bjesus/muxile'

set -g @resurrect-save 'S'
set -g @resurrect-restore 'R'
# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'github_username/plugin_name#branch'
# set -g @plugin 'git@github.com:user/plugin'
# set -g @plugin 'git@bitbucket.com:user/plugin'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

bind-key "K" display-popup -E -w 40% "sesh connect \"$(
  sesh list -i | gum filter --limit 1 --placeholder 'Pick a sesh' --prompt='⚡'
  )\""

#bind-key K display-popup -E -w 40% 'sesh connect "$(
#  sesh list -i | gum filter --limit 1 --placeholder '\''Pick a sesh'\'' --prompt='\''⚡'\''
#)"'
#
